metadata:
  name: AI-Generated Transformation
  version: '1.0'
  source_ontology: http://example.org/manufacturing#
  target_ontology: http://example.org/ghg-report#
  description: Transformation rules generated by Claude AI
  generated_by: AI
  ai_model: claude-sonnet-4
constants:
  defaults:
    unknown_value: Unknown
  emission_factors:
    electricity: 0.5
    natural_gas: 2.03
    diesel: 2.68
    gasoline: 2.31
    fuel_oil: 2.96
  calculation_methods:
    electricity: Grid Emission Factor Method
    natural_gas: Direct Combustion Calculation
    diesel: Direct Combustion Calculation
root_mapping:
  target_type: target:EmissionReport
  target_context:
    target: http://example.org/ghg-report#
    xsd: http://www.w3.org/2001/XMLSchema#
field_mappings:
- source_path: activity_name
  target_path: emission_source
  default: ${constants.defaults.unknown_value}
- source_path: facility
  target_path: organization_name
  default: ${constants.defaults.unknown_value}
- source_path: energy_type_name
  target_path: source_category
  default: ${constants.defaults.unknown_value}
calculation_rules:
- name: calculate_co2_emissions
  description: Calculate CO2 emissions from energy consumption
  input:
    input1: $.amount
    input2: $.energy_type_name
  formula: energy_amount Ã— emission_factor_by_type
  output: co2_amount
- name: create_reporting_period
  description: Create reporting period string from start and end dates
  input:
    input1: $.start_date
    input2: $.end_date
  formula: start_date + ' to ' + end_date
  output: reporting_period
transformation_steps:
- name: create_emission_report_structure
  description: Create the root emission report structure
  source: manufacturing_activities
  target: emission_report
  iteration: false
  substeps: []
- name: transform_activities_to_emissions
  description: Transform manufacturing activities to emission records
  source: manufacturing_activities
  target: emissions
  iteration: true
  substeps: []
- name: create_organization_info
  description: Extract organization information from activities
  source: manufacturing_activities
  target: reporting_organization
  iteration: false
  substeps: []
- name: calculate_totals
  description: Calculate aggregate emission totals
  source: emissions
  target: totals
  iteration: false
  substeps: []
- name: create_reporting_period
  description: Generate reporting period from activity dates
  source: manufacturing_activities
  target: reporting_period
  iteration: false
  substeps: []
- name: calculate_aggregations
  description: Calculate aggregated values
  aggregations:
  - name: total_scope2_emissions
    source: scope2emissions
    aggregate:
      function: sum
      field: co2_amount
    rounding: 2
    target: total_scope_2
  - name: total_emissions_overall
    source: emissions
    aggregate:
      function: sum
      field: co2_amount
    rounding: 2
    target: total_emissions
options:
  preserve_source_context: true
  case_sensitive: false
  null_handling: use_defaults
